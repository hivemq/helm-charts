suite: HiveMQ Platform Operator - Grafana Dashboard ConfigMap
templates:
  - configmap-grafana-dashboard.yaml
release:
  name: operator
  namespace: hivemq-platform-operator-namespace
chart:
  version: 0.0.1
  appVersion: 1.0.0
capabilities:
  apiVersions:
    - monitoring.coreos.com/v1
tests:

  - it: with default values, default ConfigMap not created
    asserts:
      - notFailedTemplate: {}
      - hasDocuments:
          count: 0

  - it: with monitoring enabled and Prometheus Monitoring CRDs present, ConfigMap created
    set:
      monitoring.enabled: true
    asserts:
      - notFailedTemplate: {}
      - hasDocuments:
          count: 1

  - it: with long Helm release name, ConfigMap name truncated
    release:
      name: a-very-long-hivemq-platform-operator-release-name
    set:
      monitoring.enabled: true
    asserts:
      - equal:
          path: metadata.name
          value: hivemq-platform-operator-dashboard-a-very-long-hivemq-platform

  - it: with no Prometheus Monitoring CRDs installed, validation fails
    set:
      monitoring.enabled: true
    capabilities:
      apiVersions:
    asserts:
      - failedTemplate:
          errorPattern: There is no Prometheus ServiceMonitor CustomResourceDefinition \(CRD\) available in your Kubernetes cluster. Prometheus Monitoring CRDs are required before installing the ServiceMonitor resource.

  - it: with invalid Dashboard namespace, then schema validation fails
    set:
      monitoring:
        enabled: true
        dashboard:
          namespace: this-is-an-extremely-very-long-hivemq-platform-operator-namespace-name
    asserts:
      - failedTemplate: {}

  - it: with default values, default ConfigMap resource created
    set:
      monitoring.enabled: true
    asserts:
      - containsDocument:
          apiVersion: v1
          kind: ConfigMap
          name: hivemq-platform-operator-dashboard-operator

  - it: with monitoring enabled and default values, ConfigMap metadata created with defaults values
    set:
      monitoring.enabled: true
    asserts:
      - isSubset:
          path: metadata
          content:
            labels:
              helm.sh/chart: hivemq-platform-operator-0.0.1
              app.kubernetes.io/name: hivemq-platform-operator
              app.kubernetes.io/instance: operator
              app.kubernetes.io/version: 1.0.0
              app.kubernetes.io/managed-by: Helm
              grafana_dashboard: "1"
            name: hivemq-platform-operator-dashboard-operator
            namespace: hivemq-platform-operator-namespace

  - it: with monitoring enabled and custom metadata values, ConfigMap metadata created with custom values
    release:
      name: custom-release-name
      namespace: custom-release-namespace
    chart:
      appVersion: 1.0.0
      version: 0.1.0
    set:
      monitoring:
        enabled: true
        dashboard:
          namespace: my-custom-dashboard-namespace
    asserts:
      - isSubset:
          path: metadata
          content:
            labels:
              helm.sh/chart: hivemq-platform-operator-0.1.0
              app.kubernetes.io/name: hivemq-platform-operator
              app.kubernetes.io/instance: custom-release-name
              app.kubernetes.io/version: 1.0.0
              app.kubernetes.io/managed-by: Helm
              grafana_dashboard: "1"
            name: hivemq-platform-operator-dashboard-custom-release-name
            namespace: my-custom-dashboard-namespace

  - it: with monitoring enabled and default values, ConfigMap spec created with defaults values
    set:
      monitoring.enabled: true
    asserts:
      - exists:
          path: data["operator-dashboard.json"]
      - equal:
          path: data["operator-dashboard.json"]
          value: |
            {
              "annotations": {
                "list": [
                  {
                    "$$hashKey": "object:137",
                    "builtIn": 1,
                    "datasource": {
                      "type": "datasource",
                      "uid": "grafana"
                    },
                    "enable": true,
                    "hide": true,
                    "iconColor": "rgba(0, 211, 255, 1)",
                    "limit": 100,
                    "name": "Annotations & Alerts",
                    "showIn": 0,
                    "type": "dashboard"
                  },
                  {
                    "$$hashKey": "object:138",
                    "datasource": {
                      "type": "prometheus",
                      "uid": "prometheus"
                    },
                    "enable": true,
                    "expr": "resets(process_uptime_seconds{application=\"$application\", instance=\"$instance\"}[1m]) > 0",
                    "hide": false,
                    "iconColor": "rgba(255, 96, 96, 1)",
                    "name": "Restart Detection",
                    "showIn": 0,
                    "step": "1m",
                    "tagKeys": "restart-tag",
                    "textFormat": "uptime reset",
                    "titleFormat": "Restart"
                  }
                ]
              },
              "description": "Dashboard for Micrometer instrumented applications (Java, Spring Boot, Micronaut)",
              "editable": true,
              "fiscalYearStartMonth": 0,
              "graphTooltip": 1,
              "id": 32,
              "links": [],
              "panels": [
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 0
                  },
                  "id": 125,
                  "panels": [],
                  "title": "Quick Facts",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "decimals": 1,
                      "mappings": [
                        {
                          "options": {
                            "match": "null",
                            "result": {
                              "text": "N/A"
                            }
                          },
                          "type": "special"
                        }
                      ],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "s"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 6,
                    "x": 0,
                    "y": 1
                  },
                  "id": 63,
                  "maxDataPoints": 100,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "none",
                    "justifyMode": "auto",
                    "orientation": "horizontal",
                    "percentChangeColorMode": "standard",
                    "reduceOptions": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "showPercentChange": false,
                    "textMode": "auto",
                    "wideLayout": true
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_uptime_seconds{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "",
                      "metric": "",
                      "refId": "A",
                      "step": 14400
                    }
                  ],
                  "title": "Uptime",
                  "type": "stat"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "mappings": [
                        {
                          "options": {
                            "match": "null",
                            "result": {
                              "text": "N/A"
                            }
                          },
                          "type": "special"
                        }
                      ],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "dateTimeAsIso"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 6,
                    "x": 6,
                    "y": 1
                  },
                  "id": 92,
                  "maxDataPoints": 100,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "none",
                    "justifyMode": "auto",
                    "orientation": "horizontal",
                    "percentChangeColorMode": "standard",
                    "reduceOptions": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "showPercentChange": false,
                    "textMode": "auto",
                    "wideLayout": true
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_start_time_seconds{application=\"$application\", instance=\"$instance\"}*1000",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "",
                      "metric": "",
                      "refId": "A",
                      "step": 14400
                    }
                  ],
                  "title": "Start time",
                  "type": "stat"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "decimals": 2,
                      "mappings": [
                        {
                          "options": {
                            "match": "null",
                            "result": {
                              "text": "N/A"
                            }
                          },
                          "type": "special"
                        }
                      ],
                      "max": 100,
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "rgba(50, 172, 45, 0.97)",
                            "value": null
                          },
                          {
                            "color": "rgba(237, 129, 40, 0.89)",
                            "value": 70
                          },
                          {
                            "color": "rgba(245, 54, 54, 0.9)",
                            "value": 90
                          }
                        ]
                      },
                      "unit": "percent"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 6,
                    "x": 12,
                    "y": 1
                  },
                  "id": 65,
                  "maxDataPoints": 100,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "none",
                    "justifyMode": "auto",
                    "orientation": "horizontal",
                    "percentChangeColorMode": "standard",
                    "reduceOptions": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "showPercentChange": false,
                    "textMode": "auto",
                    "wideLayout": true
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"heap\"})*100/sum(jvm_memory_max_bytes{application=\"$application\",instance=\"$instance\", area=\"heap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "",
                      "refId": "A",
                      "step": 14400
                    }
                  ],
                  "title": "Heap used",
                  "type": "stat"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "decimals": 2,
                      "mappings": [
                        {
                          "options": {
                            "match": "null",
                            "result": {
                              "text": "N/A"
                            }
                          },
                          "type": "special"
                        },
                        {
                          "options": {
                            "from": -1e+32,
                            "result": {
                              "text": "N/A"
                            },
                            "to": 0
                          },
                          "type": "range"
                        }
                      ],
                      "max": 100,
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "rgba(50, 172, 45, 0.97)",
                            "value": null
                          },
                          {
                            "color": "rgba(237, 129, 40, 0.89)",
                            "value": 70
                          },
                          {
                            "color": "rgba(245, 54, 54, 0.9)",
                            "value": 90
                          }
                        ]
                      },
                      "unit": "percent"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 6,
                    "x": 18,
                    "y": 1
                  },
                  "id": 75,
                  "maxDataPoints": 100,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "none",
                    "justifyMode": "auto",
                    "orientation": "horizontal",
                    "percentChangeColorMode": "standard",
                    "reduceOptions": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "showPercentChange": false,
                    "textMode": "auto",
                    "wideLayout": true
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"nonheap\"})*100/sum(jvm_memory_max_bytes{application=\"$application\",instance=\"$instance\", area=\"nonheap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "",
                      "refId": "A",
                      "step": 14400
                    }
                  ],
                  "title": "Non-Heap used",
                  "type": "stat"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 4
                  },
                  "id": 126,
                  "panels": [],
                  "title": "I/O Overview",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "ops"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 9,
                    "x": 0,
                    "y": 5
                  },
                  "id": 111,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(rate(http_server_requests_seconds_count{application=\"$application\", instance=\"$instance\"}[2m]))",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "HTTP",
                      "refId": "A"
                    }
                  ],
                  "title": "Rate",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "s"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 9,
                    "x": 9,
                    "y": 5
                  },
                  "id": 113,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(rate(http_server_requests_seconds_sum{application=\"$application\", instance=\"$instance\", status!~\"5..\"}[2m]))/sum(rate(http_server_requests_seconds_count{application=\"$application\", instance=\"$instance\", status!~\"5..\"}[2m]))",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "HTTP - AVG",
                      "refId": "A"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "max(http_server_requests_seconds_max{application=\"$application\", instance=\"$instance\", status!~\"5..\"})",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "HTTP - MAX",
                      "refId": "B"
                    }
                  ],
                  "title": "Duration",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "ops"
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "#890f02",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP - 5xx"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "#bf1b00",
                              "mode": "fixed"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 18,
                    "y": 5
                  },
                  "id": 112,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(rate(http_server_requests_seconds_count{application=\"$application\", instance=\"$instance\", status=~\"5..\"}[5m]))",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "HTTP - 5xx",
                      "refId": "A"
                    }
                  ],
                  "title": "Errors",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 12
                  },
                  "id": 127,
                  "panels": [],
                  "title": "JVM Memory",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "bytes"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 0,
                    "y": 13
                  },
                  "id": 24,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"heap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_committed_bytes{application=\"$application\", instance=\"$instance\", area=\"heap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "committed",
                      "refId": "B",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_max_bytes{application=\"$application\", instance=\"$instance\", area=\"heap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "refId": "C",
                      "step": 2400
                    }
                  ],
                  "title": "JVM Heap",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "bytes"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 6,
                    "y": 13
                  },
                  "id": 25,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"nonheap\"})",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_committed_bytes{application=\"$application\", instance=\"$instance\", area=\"nonheap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "committed",
                      "refId": "B",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_max_bytes{application=\"$application\", instance=\"$instance\", area=\"nonheap\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "refId": "C",
                      "step": 2400
                    }
                  ],
                  "title": "JVM Non-Heap",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "bytes"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 12,
                    "y": 13
                  },
                  "id": 26,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_committed_bytes{application=\"$application\", instance=\"$instance\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "committed",
                      "refId": "B",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "sum(jvm_memory_max_bytes{application=\"$application\", instance=\"$instance\"})",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "refId": "C",
                      "step": 2400
                    }
                  ],
                  "title": "JVM Total",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "bytes"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 18,
                    "y": 13
                  },
                  "id": 86,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_memory_vss_bytes{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": true,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "vss",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_memory_rss_bytes{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "rss",
                      "refId": "B"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_memory_swap_bytes{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "swap",
                      "refId": "C"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_memory_rss_bytes{application=\"$application\", instance=\"$instance\"} + process_memory_swap_bytes{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "total",
                      "refId": "D"
                    }
                  ],
                  "title": "JVM Process Memory",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 20
                  },
                  "id": 128,
                  "panels": [],
                  "title": "JVM Misc",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "decimals": 1,
                      "mappings": [],
                      "max": 1,
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "percentunit"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 11,
                    "x": 0,
                    "y": 21
                  },
                  "id": 106,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "system_cpu_usage{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": false,
                      "intervalFactor": 1,
                      "legendFormat": "system",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_cpu_usage{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": false,
                      "intervalFactor": 1,
                      "legendFormat": "process",
                      "refId": "B"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "avg_over_time(process_cpu_usage{application=\"$application\", instance=\"$instance\"}[1h])",
                      "format": "time_series",
                      "hide": false,
                      "intervalFactor": 1,
                      "legendFormat": "process-1h",
                      "refId": "C"
                    }
                  ],
                  "title": "CPU Usage",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "barWidthFactor": 0.6,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "decimals": 1,
                      "mappings": [],
                      "min": 0,
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "short"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 13,
                    "x": 11,
                    "y": 21
                  },
                  "id": 93,
                  "options": {
                    "dataLinks": [],
                    "legend": {
                      "calcs": [
                        "lastNotNull",
                        "max"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "11.3.0",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "system_load_average_1m{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "system-1m",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "system_cpu_count{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "cpus",
                      "refId": "B"
                    }
                  ],
                  "title": "Load",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 28
                  },
                  "id": 124,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_threads_states_threads{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "{{state}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Thread States",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 8,
                    "y": 28
                  },
                  "id": 32,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_threads_live_threads{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "live",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_threads_daemon_threads{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "daemon",
                      "metric": "",
                      "refId": "B",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_threads_peak_threads{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "peak",
                      "refId": "C",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_threads{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "process",
                      "refId": "D",
                      "step": 2400
                    }
                  ],
                  "title": "Threads",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 16,
                    "y": 28
                  },
                  "id": 61,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_files_open_files{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": false,
                      "intervalFactor": 2,
                      "legendFormat": "open",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "process_files_max_files{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": false,
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "metric": "",
                      "refId": "B",
                      "step": 2400
                    }
                  ],
                  "title": "File Descriptors",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 35
                  },
                  "id": 129,
                  "panels": [],
                  "repeat": "persistence_counts",
                  "title": "JVM Memory Pools (Heap)",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 36
                  },
                  "id": 3,
                  "maxPerRow": 3,
                  "options": {
                    "dataLinks": []
                  },
                  "repeat": "jvm_memory_pool_heap",
                  "repeatDirection": "v",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_heap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 1800
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_committed_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_heap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "commited",
                      "metric": "",
                      "refId": "B",
                      "step": 1800
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_max_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_heap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "metric": "",
                      "refId": "C",
                      "step": 1800
                    }
                  ],
                  "title": "$jvm_memory_pool_heap",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 43
                  },
                  "id": 130,
                  "panels": [],
                  "title": "JVM Memory Pools (Non-Heap)",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 44
                  },
                  "id": 78,
                  "maxPerRow": 3,
                  "options": {
                    "dataLinks": []
                  },
                  "repeat": "jvm_memory_pool_nonheap",
                  "repeatDirection": "v",
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_nonheap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 1800
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_committed_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_nonheap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "commited",
                      "metric": "",
                      "refId": "B",
                      "step": 1800
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_memory_max_bytes{application=\"$application\", instance=\"$instance\", id=~\"$jvm_memory_pool_nonheap\"}",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "max",
                      "metric": "",
                      "refId": "C",
                      "step": 1800
                    }
                  ],
                  "title": "$jvm_memory_pool_nonheap",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 51
                  },
                  "id": 131,
                  "panels": [],
                  "title": "Garbage Collection",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 52
                  },
                  "id": 98,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(jvm_gc_pause_seconds_count{application=\"$application\", instance=\"$instance\"}[2m])",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "{{action}} ({{cause}})",
                      "refId": "A"
                    }
                  ],
                  "title": "Collections",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 8,
                    "y": 52
                  },
                  "id": 101,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(jvm_gc_pause_seconds_sum{application=\"$application\", instance=\"$instance\"}[1m])/rate(jvm_gc_pause_seconds_count{application=\"$application\", instance=\"$instance\"}[1m])",
                      "format": "time_series",
                      "hide": false,
                      "instant": false,
                      "intervalFactor": 1,
                      "legendFormat": "avg {{action}} ({{cause}})",
                      "refId": "A"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_gc_pause_seconds_max{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "hide": false,
                      "instant": false,
                      "intervalFactor": 1,
                      "legendFormat": "max {{action}} ({{cause}})",
                      "refId": "B"
                    }
                  ],
                  "title": "Pause Durations",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 16,
                    "y": 52
                  },
                  "id": 99,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(jvm_gc_memory_allocated_bytes_total{application=\"$application\", instance=\"$instance\"}[2m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "allocated",
                      "refId": "A"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(jvm_gc_memory_promoted_bytes_total{application=\"$application\", instance=\"$instance\"}[2m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "promoted",
                      "refId": "B"
                    }
                  ],
                  "title": "Allocated/Promoted",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 59
                  },
                  "id": 132,
                  "panels": [],
                  "title": "Classloading",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 0,
                    "y": 60
                  },
                  "id": 37,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_classes_loaded_classes{application=\"$application\", instance=\"$instance\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "loaded",
                      "metric": "",
                      "refId": "A",
                      "step": 1200
                    }
                  ],
                  "title": "Classes loaded",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 12,
                    "y": 60
                  },
                  "id": 38,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "delta(jvm_classes_loaded_classes{application=\"$application\",instance=\"$instance\"}[2m])",
                      "format": "time_series",
                      "hide": false,
                      "interval": "",
                      "intervalFactor": 1,
                      "legendFormat": "delta-1m",
                      "metric": "",
                      "refId": "A",
                      "step": 1200
                    }
                  ],
                  "title": "Class delta",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 67
                  },
                  "id": 133,
                  "panels": [],
                  "title": "Buffer Pools",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 0,
                    "y": 68
                  },
                  "id": 33,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_memory_used_bytes{application=\"$application\", instance=\"$instance\", id=\"direct\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_total_capacity_bytes{application=\"$application\", instance=\"$instance\", id=\"direct\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "capacity",
                      "metric": "",
                      "refId": "B",
                      "step": 2400
                    }
                  ],
                  "title": "Direct Buffers",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 6,
                    "y": 68
                  },
                  "id": 83,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_count_buffers{application=\"$application\", instance=\"$instance\", id=\"direct\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "count",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    }
                  ],
                  "title": "Direct Buffers",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 12,
                    "y": 68
                  },
                  "id": 85,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_memory_used_bytes{application=\"$application\", instance=\"$instance\", id=\"mapped\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "used",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_total_capacity_bytes{application=\"$application\", instance=\"$instance\", id=\"mapped\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "capacity",
                      "metric": "",
                      "refId": "B",
                      "step": 2400
                    }
                  ],
                  "title": "Mapped Buffers",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 7,
                    "w": 6,
                    "x": 18,
                    "y": 68
                  },
                  "id": 84,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "jvm_buffer_count_buffers{application=\"$application\", instance=\"$instance\", id=\"mapped\"}",
                      "format": "time_series",
                      "intervalFactor": 2,
                      "legendFormat": "count",
                      "metric": "",
                      "refId": "A",
                      "step": 2400
                    }
                  ],
                  "title": "Mapped Buffers",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 75
                  },
                  "id": 163,
                  "panels": [],
                  "title": "HTTP Edpoints",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 76
                  },
                  "id": 143,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(http_server_requests_seconds_count{application=\"$application\", instance=\"$instance\"}[2m])",
                      "interval": "",
                      "legendFormat": "{{method}} - {{uri}} - {{status}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Total number of requests",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 76
                  },
                  "id": 155,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(http_server_requests_seconds_sum{application=\"$application\", instance=\"$instance\"}[4m]) / rate(http_server_requests_seconds_count{application=\"$application\", instance=\"$instance\"}[4m])",
                      "interval": "",
                      "legendFormat": "{{method}} - {{uri}} - {{status}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Average inbound request duration",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 84
                  },
                  "id": 153,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "http_server_requests_seconds_max{application=\"$application\", instance=\"$instance\"}",
                      "interval": "",
                      "legendFormat": "{{method}} - {{uri}} - {{status}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Maximum inbound request duration",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 84
                  },
                  "id": 151,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(http_server_requests_seconds_sum{application=\"$application\", instance=\"$instance\"}[2m])",
                      "interval": "",
                      "legendFormat": "{{method}} - {{uri}} - {{status}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Sum of the duration of every request",
                  "type": "timeseries"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 92
                  },
                  "id": 173,
                  "panels": [],
                  "title": "GraphQL requests",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 93
                  },
                  "id": 171,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(mp_graphql_seconds_count{application=\"$application\", instance=\"$instance\"}[2m])",
                      "interval": "",
                      "legendFormat": "{{type}} {{name}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Total number of GraphQL requests",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 93
                  },
                  "id": 181,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(mp_graphql_seconds_sum{application=\"$application\", instance=\"$instance\"}[4m]) / rate(mp_graphql_seconds_count{application=\"$application\", instance=\"$instance\"}[4m])",
                      "interval": "",
                      "legendFormat": "{{type}} {{name}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Average inbound request duration",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 101
                  },
                  "id": 183,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "mp_graphql_seconds_max{application=\"$application\", instance=\"$instance\"}",
                      "interval": "",
                      "legendFormat": "{{type}} {{name}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Maximum inbound GraphQL request duration",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "fieldConfig": {
                    "defaults": {},
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 101
                  },
                  "id": 185,
                  "options": {
                    "dataLinks": []
                  },
                  "targets": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "prometheus"
                      },
                      "expr": "rate(mp_graphql_seconds_sum{application=\"$application\", instance=\"$instance\"}[2m])",
                      "interval": "",
                      "legendFormat": "{{type}} {{name}}",
                      "refId": "A"
                    }
                  ],
                  "title": "Sum of the duration of every GraphQL request",
                  "type": "timeseries"
                }
              ],
              "preload": false,
              "refresh": "10s",
              "schemaVersion": 40,
              "tags": [],
              "templating": {
                "list": [
                  {
                    "current": {
                      "text": "",
                      "value": ""
                    },
                    "datasource": "prometheus",
                    "definition": "",
                    "includeAll": false,
                    "label": "Application",
                    "name": "application",
                    "options": [],
                    "query": "label_values(application)",
                    "refresh": 2,
                    "regex": "",
                    "type": "query"
                  },
                  {
                    "current": {
                      "text": "10.244.0.12:8080",
                      "value": "10.244.0.12:8080"
                    },
                    "datasource": "prometheus",
                    "definition": "",
                    "includeAll": false,
                    "label": "Instance",
                    "name": "instance",
                    "options": [],
                    "query": "label_values(jvm_memory_used_bytes{application=\"$application\"}, instance)",
                    "refresh": 2,
                    "regex": "",
                    "type": "query"
                  },
                  {
                    "current": {
                      "text": "All",
                      "value": "$__all"
                    },
                    "datasource": "prometheus",
                    "definition": "",
                    "includeAll": true,
                    "label": "JVM Memory Pools Heap",
                    "name": "jvm_memory_pool_heap",
                    "options": [],
                    "query": "label_values(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"heap\"},id)",
                    "refresh": 1,
                    "regex": "",
                    "sort": 1,
                    "type": "query"
                  },
                  {
                    "current": {
                      "text": "All",
                      "value": "$__all"
                    },
                    "datasource": "prometheus",
                    "definition": "",
                    "includeAll": true,
                    "label": "JVM Memory Pools Non-Heap",
                    "name": "jvm_memory_pool_nonheap",
                    "options": [],
                    "query": "label_values(jvm_memory_used_bytes{application=\"$application\", instance=\"$instance\", area=\"nonheap\"},id)",
                    "refresh": 1,
                    "regex": "",
                    "sort": 2,
                    "type": "query"
                  }
                ]
              },
              "time": {
                "from": "now-30m",
                "to": "now"
              },
              "timepicker": {},
              "timezone": "",
              "title": "HiveMQ Platform Operator (Prometheus)",
              "uid": "pmawgrlGk__",
              "version": "1.0",
              "weekStart": ""
            }
